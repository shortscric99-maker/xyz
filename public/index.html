<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CricScore Live</title>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Navigation / Header -->
        <header class="app-header">
            <h1 id="header-title">CricScore</h1>
            <div id="user-actions"></div>
        </header>

        <!-- Views Container -->
        <main id="main-container">
            <!-- 1. Dashboard View -->
            <section id="view-dashboard" class="view active">
                <button id="btn-create-match" class="primary-btn large">+ New Match</button>
                <div id="recent-matches"></div>
            </section>

            <!-- 2. Create Match View -->
            <section id="view-create" class="view hidden">
                <h2>Match Setup</h2>
                <form id="create-match-form">
                    <input type="text" id="match-title" placeholder="Match Title (e.g. Final)" required>
                    <input type="text" id="team1-name" placeholder="Team 1 Name" required>
                    <input type="text" id="team2-name" placeholder="Team 2 Name" required>
                    <input type="number" id="overs" placeholder="Overs" value="20">
                    <button type="submit" class="primary-btn">Start Setup</button>
                </form>
            </section>

            <!-- 3. Toss/Openers View -->
            <section id="view-toss" class="view hidden">
                <h2>Toss & Openers</h2>
                <div id="toss-controls">
                    <p>Who won the toss?</p>
                    <div class="toggle-group" id="toss-winner-group"></div>
                    <p>Decision?</p>
                    <div class="toggle-group">
                        <button data-val="bat">Bat</button>
                        <button data-val="bowl">Bowl</button>
                    </div>
                    <button id="start-scoring-btn" class="primary-btn">Start Match</button>
                </div>
            </section>

            <!-- 4. Scoring / Live View -->
            <section id="view-match" class="view hidden">
                <div class="score-card-live">
                    <div class="teams-header">
                        <span id="batting-team-name">IND</span> vs <span id="bowling-team-name">AUS</span>
                    </div>
                    <div class="main-score">
                        <span id="score-display">0/0</span>
                        <span id="overs-display">(0.0)</span>
                    </div>
                    <div class="crr-display">CRR: <span id="crr">0.00</span></div>
                </div>

                <div class="players-live">
                    <div class="batter active-striker" id="striker-row">
                        <span class="name">Striker</span> <span class="stats">0(0)</span>
                    </div>
                    <div class="batter" id="non-striker-row">
                        <span class="name">Non-Striker</span> <span class="stats">0(0)</span>
                    </div>
                    <div class="bowler-row">
                        <span class="name">Bowler</span> <span class="stats">0-0 (0.0)</span>
                    </div>
                </div>

                <div class="recent-overs" id="recent-balls"></div>

                <!-- Controls (Only visible to Scorer) -->
                <div id="scorer-controls" class="scorer-pad hidden">
                    <div class="pad-row">
                        <button class="run-btn" data-run="0">0</button>
                        <button class="run-btn" data-run="1">1</button>
                        <button class="run-btn" data-run="2">2</button>
                        <button class="run-btn" data-run="3">3</button>
                    </div>
                    <div class="pad-row">
                        <button class="run-btn" data-run="4">4</button>
                        <button class="run-btn" data-run="6">6</button>
                        <button class="extra-btn" data-type="WD">WD</button>
                        <button class="extra-btn" data-type="NB">NB</button>
                    </div>
                    <div class="pad-row">
                        <button class="wicket-btn" onclick="handleWicket()">OUT</button>
                        <button class="action-btn" onclick="undoLastBall()">UNDO</button>
                        <button class="action-btn" onclick="shareMatch()">SHARE</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <!-- App Scripts -->
    <script src="firebase-service.js"></script>
    <script src="cricket.js"></script>
    <script src="app.js"></script>
</body>
</html>
